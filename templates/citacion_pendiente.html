{% extends './base.html' %}

{% block title %} {% endblock %}

{% block body %}
<body>
    <h1 class="text-center mt5 mb-5 text-primary">SIGAI</h1>

    <div class="container">
        <div>
          <a href="/citacion" class="btn btn-white"><img src="{{url_for('static', filename='img/volver.png')}}" width="50" height="50" class="icono-left"></a>
        </div>
        <div class="card">
          <div class="container">
            <div class="card-body">
              <div class="text-white-emphasis bg-secondary">
                <h1 class="text-center mt5 mb-5 text-style text-white">Solicitude sin citaciones</h1>
              </div>
              <div class="row">
                
                <div class="col-md-3">
                  <input type="search" id="search" class="form-mb-3" placeholder="Buscar..." onkeyup="buscadorTable('tbl_usuario')">
                </div >
              </div>
              </div>
                <table class="table table-striped table-bordered" id="tbl_usuario"  cellspacing="0">
                    <thead>
                        <th scope="col">#</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Documento</th>
                        <th scope="col">Ficha</th>
                        <th scope="col">Estado</th>
                        <th scope="col">Citar</th>
                    </thead>
                    <tbody>
                    {% for d in data %}
                    <tr>
                        <td class="articulo">{{d.idusuario}}</td>
                        <td class="articulo">{{d.p_nombre}} {{d.s_nombre}} {{d.p_apellido}} {{d.s_apellido}}</td>
                        <td class="articulo">{{d.documento}}</td>
                        <td class="articulo">{{d.ficha}}</td>
                        <td class="articulo">{{d.estado }}</td>
                        <td class="articulo"><button type="button" class="btn btn-info btn-sm" id=btn-edit{{d.idusuario}} data-bs-toggle="modal" data-bs-target="#staticBackdrop{{d.idusuario}}">Citar</button></td>
                    </tr>
                  {% endfor %}
                    <!-- Modal -->
                    {% for d in data %}
                    <div class="modal fade" id="staticBackdrop{{d.idusuario}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="staticBackdropLabel">{{d.p_nombre}} {{d.s_nombre}} {{d.p_apellido}} {{d.s_apellido}} # {{d.documento}} </h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              <form action="/citar/{{d.idusuario}}" method="post" enctype="multipart/form-data" >
                                <label>Instructor solicitante</label>
                                <input type="text" class="form-control mb-3" name="instructor" value="{{d.instructor}}" disabled>
                                <label>Gestor de grupo a cargo</label> 
                                <input type="text" class="form-control mb-3" name="gestor" value="{{d.gestor}}" disabled>
                                <label>Ficha</label>
                                <input type="text" class="form-control mb-3" name="ficha" value="{{d.ficha}}" disabled>
                                <label>Competencia</label>
                                <input type="text" class="form-control mb-3" name="competencia" value="{{d.competencia}}" disabled>
                                <label>Resultado</label>
                                <input type="text" class="form-control mb-3" name="resultado" value="{{d.resultado}}" disabled>
                                <label>Fecha de citación</label>
                                <input type="date" class="form-control mb-3" name="fecha_cita"  required>
                                <label>Hora</label>
                                <input type="time" class="form-control mb-3" name="hora_cita"  required>
                                <label>Lugar de citación</label>
                                <input type="text" class="form-control mb-3" name="lugar_cita" required>
                                <label>Asunto</label>
                                <input type="text" class="form-control mb-3" name="asunto"  required>
                                <label>Adjuntar citación</label>
                                <input type="file" class="form-control" id="file"  name="file" required>
                            </div>
                            <div class="modal-footer">
                              <button type="submit" class="btn btn-secondary">Enviar</button>
                            </div>
                        </form>                         
                          </div>
                        </div>
                      </div>
                      {% endfor %} 
                    </tbody>
                </table>  
            </div>
        </div>
    </div>
</body>
{% endblock %}
